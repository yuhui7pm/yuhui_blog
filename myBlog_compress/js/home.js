var face=4;var num=0;var last_num=0;var num_negative=0;var num_positive=0;var multiple;var classname;var rotateIndex;var count=8000;var lastClickedPic;var timer;$(()=>{$('.bar1').css('background-color','#D56464');var imgWrap=document.getElementById('Banner');var bannerWrapper=document.getElementById('bannerWrapper');var buttonLeft=document.getElementsByClassName('button_left')[0];var buttonRight=document.getElementsByClassName('button_right')[0];timer=window.setInterval(time,count);hasLogined();bannerWrapper.onmouseenter=buttonHover;bannerWrapper.onmouseleave=buttonLeave;picRoll(buttonLeft,buttonRight);hotBlogs();var vibchage="visibilitychange"||"webkitvisibilitychange"||"mozvisibilitychange";document.addEventListener(vibchage,function(){if(!document.hidden){timer=window.setInterval(time,count)}else{clearInterval(timer)}})})function hotBlogs(){$.ajax({url:'/api/blog/hotBlogs',type:'GET',dataType:'json',contentType:"application/json",success:(result)=>{const data=result.data;if(result.errNum==0){data.forEach((value,index)=>{$('#contextsWrapper').prepend(`<div class="context"><span id="number">${5-index}</span><span id="article_title">${value.title}</span><span id="like_start"><span class="iconfont">&#xe63b;</span><span id="start_description">${value.praisenum}喜欢</span></span></div>`)})}}})}function hasLogined(){if(window.location.href.split('?').length>1){const path=window.location.href.split('?')[1];const username=path.split('=')[1];document.getElementsByClassName('username')[0].innerHTML=decodeURI(username);document.getElementsByClassName('loginStatus')[0].innerHTML='退出'}else{$('.username').html('用户');$('.loginStatus').html('登录')}}function changeFrameHeight(){var ifm=document.getElementsByClassName("articles")[0];ifm.height=document.documentElement.clientHeight}function time(){last_num=num;num++;if(num<0){multiple=Math.ceil(Math.abs(num)/4)num_positive=4*multiple-Math.abs(num)}else{num_positive=num}document.getElementsByClassName('bannerClass')[0].style.transform='rotateX('+num*90+'deg)';document.getElementById('album').children[(num_positive+3)%4].setAttribute('style','filter: opacity(0.7);');document.getElementById('album').children[num_positive%4].setAttribute('style','filter: opacity(1);');if(num==100){num=0;last_num=0;num_negative=0;num_positive=0}}function buttonHover(){document.getElementsByClassName('button_left')[0].style.display='block';document.getElementsByClassName('button_right')[0].style.display='block'}function buttonLeave(){document.getElementsByClassName('button_left')[0].style.display='none';document.getElementsByClassName('button_right')[0].style.display='none'}function getCookie(cookieName){var cookieValue="";if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=cookies[i];if(cookie.substring(0,cookieName.length+2).trim()==cookieName.trim()+"="){cookieValue=cookie.substring(cookieName.length+2,cookie.length);break}}}return cookieValue}window.onResize=function(){changeFrameHeight()}function picRoll(buttonLeft,buttonRight){buttonLeft.onclick=function(){clearInterval(timer);num--;if(num<0){multiple=Math.ceil(Math.abs(num)/4)num_negative=4*multiple-Math.abs(num)}else{num_negative=num%4}document.getElementById('album').children[(num_negative+1)%4].setAttribute('style','filter: opacity(0.7);');document.getElementById('album').children[num_negative].setAttribute('style','filter: opacity(1);');document.getElementsByClassName('bannerClass')[0].style.transform='rotateX('+num*90+'deg)';timer=window.setInterval(time,count)}buttonRight.onclick=function(){last_num=num;clearInterval(timer);num++;if(num<0){multiple=Math.ceil(Math.abs(num)/4)num_positive=4*multiple-Math.abs(num)}else{num_positive=num}document.getElementById('album').children[(num_positive+3)%4].setAttribute('style','filter: opacity(0.7);');document.getElementById('album').children[num_positive%4].setAttribute('style','filter: opacity(1);');document.getElementsByClassName('bannerClass')[0].style.transform='rotateX('+num*90+'deg)';timer=window.setInterval(time,count)}document.getElementById("album").onclick=function(e){clearInterval(timer);e=e||window.event;classname=e.target.className;rotateIndex=parseInt(classname.replace(/[^\d]/g,''));lastClickedPic=rotateIndex;num=num+rotateIndex-num%4;document.getElementsByClassName('bannerClass')[0].style.transform='rotateX('+(num)*90+'deg)';timer=window.setInterval(time,count)}}